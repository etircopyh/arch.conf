#!/bin/sh

set -o errexit

WALL_DIR="${XDG_CONFIG_HOME:-$HOME/.config}/sway/wallpapers"

if [ "${FLOCKER}" != "$0" ]; then
    exec env FLOCKER="$0" flock -en "$0" "$0" "$@"
else
    :
fi

INTERVAL=15m

for wallpaper in "$WALL_DIR"/*; do
    wallpaper=${wallpaper##*/}
    swaymsg output "*" background "$WALL_DIR/$wallpaper" fill
    sleep "$INTERVAL"
done

